Mon Oct  2 14:50:57 1995  Ezra Peisach  <epeisach@kangaroo.mit.edu>

	* adm_v4_pwd.c: Changes to work under OSF/1.

Wed Sep 06 14:20:57 1995   Chris Provenzano (proven@mit.edu)

        * adm_adm_func.c, adm_fmt_inq.c, adm_funcs.c, adm_process.c,
	* adm_server.c adm_v4_pwd.c : s/keytype/enctype/g, s/KEYTYPE/ENCTYPE/g

Tue Sep 05 22:10:34 1995   Chris Provenzano (proven@mit.edu)

        * adm_adm_func.c, adm_fmt_inq.c, adm_funcs.c, adm_process.c,
	* adm_server.c, adm_v4_pwd.c adm_v4_pwd.c: Remove krb5_enctype 
		references, and replace with krb5_keytype where appropriate.

Mon Aug 21 17:05:18 EDT 1995	Paul Park	(pjpark@mit.edu)
	* adm_server.c - Change dbm_db_set_name to db_set_name.  Interpret -k
		and -e arguments as strings instead of string representations
		of integers (e.g. des-cbc-md5).  Fix gcc -Wall.
	* adm_extern.h - Add prototype of closedown_network() for gcc -Wall.


Tue Aug 15 14:29:26 EDT 1995	Paul Park	(pjpark@mit.edu)
	* adm_{adm_func,fmt_inq,funcs,process,server}.c, adm_extern.h - Replace
		adm_find_keytype() with krb5_dbe_find_keytype().


Thu Aug 10 14:38:14 EDT 1995	Paul Park	(pjpark@mit.edu)
	* adm_funcs.c - Rework adm_modify_kdb() to use kdb5's change-password
		interfaces.  Gut callers of adm_modify_kdb() because most of
		the work is done in kdb_cpw.c.  Add adm_find_keytype and adm_
		update_tl_attrs.
	* adm_extern.h - Add prototypes for adm_find_keytype() and adm_update_
		tl_attrs().
	* adm_adm_func, adm_fmt_inq.c - Use adm_find_keytype() to locate the
		key_data entry for a particular key/salt type instead of
		assuming that it's always in the first slot.  Actually handle
		mod_name and mod_date now.
	* adm_process, adm_server.c - Find the latest DES key for use instead
		of assuming that it's in the first slot.

Thu Aug 3 11:46:10 EDT 1995	Paul Park	(pjpark@mit.edu)
	* adm_{adm_func,fmt_inq,funcs,process,server}.c - In order to get
		things to compile, replace "salt_type" with "key_data[0].
		key_data_type[1]", "kvno" with "key_data[0].key_data_kvno"
		blindly.  Also #ifdef out anything having to do with mod_name
		mod_date and last_pwd_change.  Change "principal" to "princ"
		and remove or replace references to "key" and "alt_key".


Mon Jul 17 15:11:40 EDT 1995	Paul Park	(pjpark@mit.edu)
	* adm_server.c - Add NULL stash file argument to krb5_db_fetch_mkey().


Fri Jul 7 16:03:56 EDT 1995	Paul Park	(pjpark@mit.edu)
	* Makefile.in - Remove all explicit library handling and LDFLAGS.
	* configure.in - Add USE_<mumble> and KRB5_LIBRARIES.


Fri Jun 30 14:37:32 EDT 1995	Paul Park	(pjpark@mit.edu)
	* configure.in - Add --with-dbm to select between Berkeley and DBM
		KDC database format.


Tue Jun 27 16:10:19 EDT 1995	Paul Park	(pjpark@mit.edu)
	* adm_parse.c - Give compiler something to compile if SANDIA is not
		defined.  Some compilers choke when nothing to compile.
	* adm_process.c - Cast 4th argument of setsockopt(2) to be const char *


Thu Jun 22 11:54:31 EDT 1995	Paul Park	(pjpark@mit.edu)
	* adm_server.c - Change KDB_CONVERT_KEY_OUTOF_DB to decrypt_key call.


Thu Jun 15 17:51:04 EDT 1995	Paul Park	(pjpark@mit.edu)
	* Makefile.in - Change explicit library names to -l<lib> form, and
		change target link line to use $(LD) and associated flags.
		Also, remove DBMLIB, it was not used.
	* configure.in - Remove dbm library checks, these are no longer needed
		with the Berkeley database code.  Also, add shared library
		usage check.

Sat Jun 10 23:02:30 1995  Tom Yu  (tlyu@dragons-lair)

	* adm_adm_func.c, adm_extern.h, adm_funcs.c, adm_kadmin.c,
	  adm_kpasswd.c, adm_nego.c, adm_process.c: krb5_auth_context
		redefinitions

Fri Jun  9 19:06:45 1995    <tytso@rsx-11.mit.edu>

	* configure.in: Remove standardized set of autoconf macros, which
		are now handled by CONFIG_RULES.

Wed May 24 07:22:10 1995  Ezra Peisach  <epeisach@kangaroo.mit.edu>

	* adm_network.c (setup_network): Cast sockaddr_in * to sockaddr *
		in call to bind.

Mon May 22 09:57:08 EDT 1995	Paul Park	(pjpark@mit.edu)
	* Makefile.in	- Install kadmind as kadmind_old.  Manpage too.

Wed May 03 03:30:51 1995  Chris Provenzano (proven@mit.edu)

        * adm_process.c: (krb5_recvauth()): No longer needs the rc_type arg.

Sat Apr 29 00:24:48 1995  Theodore Y. Ts'o  <tytso@dcl>

	* adm_network.c (setup_network): Use sigaction() instead of
		signal() to setup the signal handlers.  This means we
		don't need to worry about System V signal semantics.

Fri Apr 28 21:16:10 1995  Theodore Y. Ts'o  <tytso@dcl>

	* adm_server.c (kdc_com_err_proc): Free nfmt after done using it.

	* Makefile.in (kadmind): Use $(LD) instead of $(CC) so that we can
		do purify checking.

Thu Apr 27 12:21:38 1995  Mark Eichin  <eichin@cygnus.com>

	* Makefile.in (kadmind): don't reference K4LIB since we don't set
	or use it.

Wed Apr 26 11:29:07 1995  Mark Eichin  <eichin@cygnus.com>

	* configure.in: need HAS_ANSI_VOLATILE for signal_requests_exit.

Fri Apr 21 13:11:00 1995  Mark Eichin  <eichin@cygnus.com>

	From Ian Taylor <ian@cygnus.com>. Makes kadmind use -r for both
	the database name and the service name, eliminating an
	installation hassle.
	* adm_extern.h: declare realm.
	* adm_server.c: define realm.
	(process_args): change db_realm to realm.
	* adm_network.c (setup_network): use the preset realm, not the
	default realm.

Thu Apr 20 18:05:00 1995  Mark Eichin  <eichin@cygnus.com>

	Changes from Ian Taylor <ian@cygnus.com> to support testsuite.
	* adm_extern.h: declare admin_port.
	* adm_extern.c: define admin_port.
	* adm_server.c (process_args): set admin_port from -p command line
	argument.
	(usage): document -p port option.
	* adm_network.c (setup_network): use admin_port if set.

Thu Apr 20 11:47:53 1995    <tytso@rsx-11.mit.edu>

	* adm_extern.h: #include adm_defs.h, since that's no longer
		included by krb5.h

Mon Mar 27 07:56:26 1995 Chris Provenzano (proven@mit.edu)

        * adm_process.c, adm_kadmin.c, adm_adm_func.c, adm_kpasswd.c, 
	* adm_funcs, adm_nego.c adm_extern.c and adm_listen.c
                Use new calling convention for krb5_recvauth(), krb5_mk_priv(),
                krb5_rd_priv(), krb5_mk_safe(), and krb5_rd_safe().
		(Redid many of the internal functions to accomidate new a
		uth_context structure and remove old unnecessary structures.)

Fri Mar 24 14:38:06 1995    <tytso@rsx-11.mit.edu>

	* adm_network.c (setup_network): If /etc/services doesn't have the
		administration port, use a compiled in port.

Thu Mar  2 12:24:50 1995  Theodore Y. Ts'o  <tytso@dcl>

	* Makefile.in (ISODELIB): Remove reference to $(ISODELIB).

Wed Mar  1 16:29:53 1995  Theodore Y. Ts'o  <tytso@dcl>

	* configure.in: Remove ISODE_INCLUDE, replace check for -lsocket
		and -lnsl with WITH_NETLIB check.

Tue Feb 28 02:23:46 1995  John Gilmore  (gnu at toad.com)

	* *.c:  Avoid <krb5/...> and <com_err.h> includes.

Fri Feb  3 07:50:14 1995  Theodore Y. Ts'o  (tytso@dcl)

	* adm_v4_pwd.c: Don't use BITS64, use SIZEOF_LONG

Wed Feb 01 22:05:35 1995  Chris Provenzano (proven@mit.edu)

	* adm_process.c, adm_extern.h (cpw_keyproc()) Added 
		krb5_keytype arg.

Wed Jan 25 16:54:40 1995  Chris Provenzano (proven@mit.edu)

        * Removed all narrow types and references to wide.h and narrow.h

Wed Jan 18 10:26:30 1995    <tytso@rsx-11.mit.edu>

	* adm_server.c (process_args): Modify getopt args so that the 'M'
		option takes an argument.  (krb5 bugs 984)

Fri Jan 13 15:23:47 1995  Chris Provenzano (proven@mit.edu)

    * Added krb5_context to all krb5_routines

Mon Dec 19 18:12:18 1994  Theodore Y. Ts'o  (tytso@dcl)

	* adm_listen.c (kill_children): Use syslog instead of krb_log.

Tue Nov  1 18:19:36 1994  Mark Eichin  (eichin@cygnus.com)

	* adm_listen.c (kill_children): use sigprocmask if available.

Wed Oct 19 17:40:22 1994  Theodore Y. Ts'o  (tytso@dcl)

	* adm_server.c (main): Select the cryptosystem to be used using
		krb5_use_cstype() instead of using a implementation
		specific assignment.  Also, allow the encryption type to
		be specified using a command line option.

Tue Oct  4 17:08:25 1994  Theodore Y. Ts'o  (tytso@dcl)

	* adm_process.c (cpw_keyproc): Add widen.h and narrow.h around
		declaration so that argument types to keyproc are widened.

Mon Oct  3 19:13:03 1994  Theodore Y. Ts'o  (tytso@dcl)

	* Makefile.in: Use $(srcdir) to find manual page for make install.

Thu Sep 29 22:41:08 1994  Theodore Y. Ts'o  (tytso@dcl)

	* Makefile.in: relink executable if libraries change

Wed Sep 14 22:33:23 1994  Theodore Y. Ts'o  (tytso@dcl)

	* adm_server (init_db): Save a copy of the master key database
		entry in the master_entry global variable.

	* adm_process.c (process_client): Removed calls to
		free(final_msg.data), where final_msg.data was pointing to
		an automatic variable.

	* adm_process.c (cpw_keyproc): In the case where the
		keyprocarg->key is set, copy the keyblock instead of
		passing a pointer down --- more pointer aliasing problems!

	* adm_funcs.c (adm_modify_kdb): Added calls to krb5_copy_principal
		instead of merely assigning pointers to one another and
		causing pointer aliasing problems.  Make sure the master
		key version number is propagated correctly.

Thu Aug  4 03:38:58 1994  Tom Yu  (tlyu@dragons-lair)

	* Makefile.in: whoops install manpage as kadmin.8, not kadmin.1

	* Makefile.in: install kadmind in the right place

Sat Jul 16 09:22:19 1994  Tom Yu  (tlyu at dragons-lair)

	* configure.in: another attempt to make dbm libs dtrt

Fri Jul  1 16:01:02 1994  Mark Eichin  (eichin@cygnus.com)

	* adm_listen.c: if USE_SIGPROCMASK, replace sigblock et al.
	configure.in: CHECK_SIGPROCMASK.

Wed Jun 29 00:25:29 1994  Tom Yu  (tlyu at dragons-lair)

	* adm_server.c: fixed error table calls to use krb5_init_ets

Fri Jun 24 20:39:37 1994  Theodore Y. Ts'o  (tytso at tsx-11)

	* adm_process.c (cpw_keyproc): return error codes on failure

	* adm_nego.c (adm_negotiate_key): added return on memory
	allocation error

	* adm_fmt_inq.c (adm_fmt_prt, adm_print_exp_time,
	  adm_print_attributes): Sanitized error return strategies.

	* adm_kadmin.c (adm5_kadmin): Plug memory leaks, fix double
	  free's, fix message in error syslog.

	* adm_process.c (process_client): Plug memory leaks

	* adm_adm_func. (adm_inq_old_key): Plug memory leaks, return error
	  when adm_fmt_prt returns an error

	* adm_adm_func.c (adm_mod_old_key): Plug memory leaks, report error
	  if put_principal returns an error.

	* adm_adm_func.c (adm_change_pwd_rnd): Fix syslog information

	* adm_adm_func.c (adm_build_key): Plug memory leak


