thisconfigdir=./..
myfulldir=appl/gssftp/ftp
mydir=ftp
BUILDTOP=$(REL)$(U)$(S)$(U)$(S)$(U)
#
# appl/gssftp/ftp/Makefile.in
#
DEFINES = -DGSSAPI -DFTP_BUFSIZ=10240
PROG_LIBPATH=-L$(TOPLIBD)
PROG_RPATH=$(KRB5_LIBDIR)

SRCS	= $(srcdir)/cmds.c $(srcdir)/cmdtab.c $(srcdir)/domacro.c \
	  $(srcdir)/ftp.c $(srcdir)/getpass.c $(srcdir)/glob.c \
	  $(srcdir)/main.c $(srcdir)/radix.c \
	  $(srcdir)/ruserpass.c $(srcdir)/secure.c 


OBJS	= $(OUTPRE)cmds.$(OBJEXT) $(OUTPRE)cmdtab.$(OBJEXT) \
	  $(OUTPRE)domacro.$(OBJEXT) $(OUTPRE)ftp.$(OBJEXT) \
	  $(OUTPRE)getpass.$(OBJEXT) $(OUTPRE)glob.$(OBJEXT) \
	  $(OUTPRE)main.$(OBJEXT) $(OUTPRE)radix.$(OBJEXT) \
	  $(OUTPRE)ruserpass.$(OBJEXT) $(OUTPRE)secure.$(OBJEXT)

LOCALINCLUDES = -I$(srcdir)/.. -I$(srcdir) @KRB4_INCLUDES@

#
# We cannot have @KRB4_INCLUDES@ under Windows, since we do not use
# configure, so we redefine LOCALINCLUDES not to have that.
#

##WIN32##LOCALINCLUDES = -I$(srcdir)/.. -I$(srcdir)

all-unix::	ftp
all-windows::	$(OUTPRE)ftp.exe

ftp:	$(OBJS) $(GSS_DEPLIBS) $(KRB5_BASE_DEPLIBS)
	$(CC_LINK) -o ftp $(OBJS) $(GSS_LIBS) $(KRB4COMPAT_LIBS)

$(OUTPRE)ftp.exe: $(OBJS) $(GLIB) $(KLIB)
	link $(EXE_LINKOPTS) -out:$@ $** wsock32.lib advapi32.lib

clean-unix::
	$(RM) ftp

depend::

install-unix::
	for f in ftp; do \
	  $(INSTALL_PROGRAM) $$f \
		$(DESTDIR)$(CLIENT_BINDIR)/`echo $$f|sed '$(transform)'`; \
	  $(INSTALL_DATA) $(srcdir)/$$f.M \
		$(DESTDIR)$(CLIENT_MANDIR)/`echo $$f|sed '$(transform)'`.1; \
	done

ftp.o cmds.o main.o:	$(srcdir)/../arpa/ftp.h
ftp.o cmds.o cmdtab.o domacro.o main.o ruserpass.o: $(srcdir)/ftp_var.h 
secure.o: secure.h

cmds.o: $(srcdir)/cmds.c
cmdtab.o: $(srcdir)/cmdtab.c
ftp.o: $(srcdir)/ftp.c
getpass.o: $(srcdir)/getpass.c
glob.o: $(srcdir)/glob.c
main.o: $(srcdir)/main.c
pclose.o: $(srcdir)/pclose.c
ruserpass.o: $(srcdir)/ruserpass.c
domacro.o: $(srcdir)/domacro.c
radix.o: $(srcdir)/radix.c
secure.o: $(srcdir)/secure.c

# NOPOSTFIX
# +++ Dependency line eater +++
# 
# Makefile dependencies follow.  This must be the last section in
# the Makefile.in file
#
cmds.o: cmds.c $(SRCTOP)/include/port-sockets.h $(SRCTOP)/appl/gssftp/arpa/ftp.h \
  ftp_var.h pathnames.h
cmdtab.o: cmdtab.c ftp_var.h
domacro.o: domacro.c ftp_var.h
ftp.o: ftp.c $(SRCTOP)/appl/gssftp/arpa/ftp.h $(SRCTOP)/appl/gssftp/arpa/telnet.h \
  $(SRCTOP)/include/port-sockets.h $(SRCTOP)/include/kerberosIV/krb.h \
  $(SRCTOP)/include/kerberosIV/des.h $(BUILDTOP)/include/gssapi/gssapi.h \
  $(BUILDTOP)/include/gssapi/gssapi_generic.h $(BUILDTOP)/include/gssapi/gssapi_krb5.h \
  $(BUILDTOP)/include/krb5.h $(BUILDTOP)/include/profile.h \
  $(BUILDTOP)/include/com_err.h ftp_var.h secure.h
getpass.o: getpass.c ftp_var.h
glob.o: glob.c ftp_var.h
main.o: main.c ftp_var.h $(SRCTOP)/appl/gssftp/arpa/ftp.h \
  $(SRCTOP)/include/port-sockets.h $(SRCTOP)/include/kerberosIV/krb.h \
  $(SRCTOP)/include/kerberosIV/des.h
radix.o: radix.c ftp_var.h
ruserpass.o: ruserpass.c ftp_var.h
secure.o: secure.c $(BUILDTOP)/include/gssapi/gssapi.h \
  $(BUILDTOP)/include/gssapi/gssapi_generic.h secure.h \
  $(SRCTOP)/include/kerberosIV/krb.h $(SRCTOP)/include/kerberosIV/des.h \
  $(SRCTOP)/include/port-sockets.h $(SRCTOP)/appl/gssftp/arpa/ftp.h

