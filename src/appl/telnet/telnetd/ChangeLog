Thu Apr 11 21:44:39 1996  Richard Basch  <basch@lehman.com>

	* sys_term.c (cleanup): Call the Kerberos 5 cleanup routine, also.

Wed Mar 27 00:27:32 1996  Tom Yu  <tlyu@dragons-lair.MIT.EDU>

	* telnetd.c: remove inclusion of netdb.h; it's already in defs.h,
		and #$%&* ultrix doesn't protect it from multiple
		inclusions.

Sat Mar 23 01:33:09 1996  Sam Hartman  <hartmans@tertius.mit.edu>

	* sys_term.c: Remove utmpx stuff so libpty can do it.
	(start_login): Remove utmpx handling here as well.
	(rmut): expunged; libpty should deal.

	* configure.in : Do not use streamspty on SGIs; it really doesn't
 	work, even though all the interfaces are prsent.

	* telnetd.c: Move prototype for doit to be global instead of
        streams-specific.

	Tue Mar 19 18:43:46 1996  Ken Raeburn  <raeburn@cygnus.com>

        For environments not supporting common storage:
        * defs.h (P): Add definition here.
        (line, encrypt_output, decrypt_input): Declare here.
        * ext.h (line, encrypt_output, decrypt_input): Not here.
        (terminaltype): Declare explicitly "extern".
        * telnetd.c (auth_level, require_SecurID): Don't initialize here.

Mon Mar 18 20:29:05 1996  Theodore Y. Ts'o  <tytso@dcl>

	* Makefile.in: Added flags which turn on the encryption option.

	* telnetd.c (getterminaltype): If the authentication option which
		was negotiated requires that encryption be turned on, then
		enforce this here.

Sun Mar  3 14:43:04 1996  Mark W. Eichin  <eichin@cygnus.com>

	* configure.in: if we don't have termcap, check for curses lib.

Wed Feb 28 21:07:42 1996  Mark Eichin  <eichin@cygnus.com>

	* telnetd.c (telnet): rename HE to HEstr to avoid conflict with
	HP/UX 10.01 "Fields within IO_STATUS register" values in cpu.h.

Mon Feb 26 03:33:48 1996  Sam Hartman  <hartmans@tertius.mit.edu>

	* configure.in: Call USE_ANAME

Sun Feb 25 20:26:00 1996  Sam Hartman  <hartmans@tertius.mit.edu>

	* telnetd.c: Use MAXDNAME not MAXHOSTNAMELEN; MAXHOSTNAMELEN is
        only for gethostname() and sethostname() and has nothing to do
        with domains.

	* configure.in : Check for arpa/nameser.h for MAXDNAME

Tue Feb 13 16:23:23 1996  Ezra Peisach  <epeisach@kangaroo.mit.edu>

	* ext.h, utility.c (fatalperror, fatal): Add const to argument.

Mon Jan 15 17:35:25 1996  Sam Hartman  <hartmans@tertius.mit.edu>

	* sys_term.c: Call pty_update_utmp with PTY_TTYSLOT_USABLE flag.

Mon Nov 27 15:55:50 1995  Tom Yu  <tlyu@dragons-lair.MIT.EDU>

	* state.c: use P properly so it won't break non-ansi compilers.

Sun Nov 12 04:56:15 1995  Mark W. Eichin  <eichin@cygnus.com>

	* telnetd.8: source tmac.doc for correct parsing.

Sat Oct 21 15:37:55 1995  Sam Hartman  <hartmans@tertius.mit.edu>

	* state.c (envvarok): Also check for variables involving =.

Thu Oct 19 01:28:23 1995  Mark W. Eichin  <eichin@cygnus.com>

	* state.c (envvarok): New function, checks environment variables
	for exceptions that should not be passed to login.
	(suboption): don't do anything to propagated environment variables
	if they fail the exception test above.

Mon Oct  9 23:01:36 1995  Sam Hartman  <hartmans@tertius.mit.edu>

	* telnetd.c (getterminaltype): If ENCRYPTION defined, send do
        encryption, *not* just will encrypt. if you don't do this, then you won't encrypt the input to the server; your password prompt is encrypted, but your password isn't.

Tue Aug  8 11:26:54 1995  Sam Hartman  <hartmans@pao.mit.edu>

	* sys_term.c: Fail if the slave side dies.
	(dup_tty): Renamed from login_tty because OSF already has that function and it isn't compatible.

	(getptyslave): Fix argument to fatalperror by including com_err.h instead of casting.

Tue Aug 8 17:25:22 EDT 1995	Paul Park	(pjpark@mit.edu)
	* sys_term.c - Cast argument to fatalperror().




	* sys_term.c: Use new interface to pty_update_utmp.
	(getptyslave): Handle error return from pty_open_slave
	Close syncpipe[1] before we read from it.

Mon Aug 7 14:44:21 EDT 1995	Paul Park	(pjpark@mit.edu)
	* configure.in, sys_term.c - Use utmpx.h if present, then check for
		utmp.h.  Add logic to handle ut_tv from utmpx.h.


Mon Aug 7 13:08:39 EDT 1995	Paul Park	(pjpark@mit.edu)
	* configure.in - Add check for utmp.h.  Make check for utmpx.h define
		additional symbol to work with libpty.h.
	* sys_term.c - Fix syntax error and reinstate #ifdef LINEMODE deleted
		by last checkin.

Fri Aug  4 20:22:28 1995  Sam Hartman  <hartmans@tertius.mit.edu>

	* sys_term.c (getptyslave): Select terminal settings more likely
        to work.
	(cleanup): Pass pid to cleanup so it can killpg if necessary.

Tue Aug  1 11:28:55 1995  Sam Hartman  <hartmans@tertius.mit.edu>

	* telnetd.c (doit): Use pty_getpty.

	* Makefile.in (LOCAL_LIBRARIES): Add -lpty

	* sys_term.c (startslave): Use pty_update_utmp.  Export slave's
        pid so it's global for pty_cleanup.  Use pipe to synchronize so
        that slave is opened before parent writes.
	(cleanopen): removed in favor of pty_open_slave
	(login_tty): Don't set controlling terminal; libpty does this.  Just dup2 the terminals.
	(getpty): removed.

	(getptyslave): Use libpty.

	* telnetd-ktd.c: Use libpty.

Tue Jul 11 11:32:56 1995  Sam Hartman  <hartmans@tertius.mit.edu>

Sat Jul 29 04:40:04 1995  Tom Yu  <tlyu@dragons-lair.MIT.EDU>


	* telnetd-ktd.c (doit): Remove special casing of Convex PTY
        handling here.  There isn't enough code here for me to understand
        what to do on a Convex system, so if it breaks, it should be
        special cased in a more-appropriate manner.


	* configure.in: Don't link with -lkadm.

Fri Jul 7 15:51:03 EDT 1995	Paul Park	(pjpark@mit.edu)
	* Makefile.in - Remove explicit library handling.
	* configure.in - Add USE_{KRB4,KADM}_LIBRARY and KRB5_LIBRARIES.

Tue Jun 20 14:25:01 1995  Tom Yu  (tlyu@dragons-lair)

	* defs.h: NO_STRING_H -> HAVE_STRING_H

	* configure.in: add test for string.h

Thu Jun 15 17:43:21 EDT 1995	Paul Park	(pjpark@mit.edu)
	* Makefile.in - Change explicit library names to -l<lib> form, and
		change target link line to use $(LD) and associated flags.
		Also, remove DBMLIB, it was not used. Also, for K4, use
		KRB4_LIB and KRB4_CRYPTO_LIB, these were
                split out.
	* configure.in - Remove dbm library checks, these are no longer needed
		with the Berkeley database code.  Also, add shared library
		usage check.


Thu Jun 15 16:18:39 1995  Sam Hartman  <hartmans@tardis.MIT.EDU>

	* sys_term.c (getpty): On AIX, open /dev/ptc for master and use
        ttyname() to get slave side; much simpler and doesn't get used
        ptys.

	(cleanopen): Revoke on AIX as well.  This may cause problems on early 3.2 versions, but not revoking causes disconnected sessions to be partially connected to new telnets.  The complete fix will be to make sure telnetd cleans up when it dies.




Fri Jun  9 18:29:56 1995    <tytso@rsx-11.mit.edu>

	* configure.in: Remove standardized set of autoconf macros, which
		are now handled by CONFIG_RULES.

Wed May  3 16:50:05 1995  Mark Eichin  <eichin@cygnus.com>

	* telnetd.c: respect HAVE_SYS_TTY_H.

Mon May  1 11:33:28 1995  Ezra Peisach  <epeisach@kangaroo.mit.edu>

	* defs.h: Temporary hack for the alpha. Undefine STREAMSPTY if
		defined. This will be removed in a later release.

Fri Apr 28 18:07:34 1995  Mark Eichin  <eichin@cygnus.com>

	* Makefile.in (KLIB): put KRB4_LIB inside KLIB.

Thu Apr 27 13:57:03 1995  Mark Eichin  <eichin@cygnus.com>

	* Makefile.in (telnetd): use KRB4_LIB directly.
	* configure.in: use WITH_KRB4 as-is.

Wed Apr 25 22:53:20 1995  Chris Provenzano  (proven@mit.edu)

        * configure.in, sys_term.c, telnetd.c : Have configure check for
                sys/ptyvar.h and sac.h before .c files include it.

Sat Apr 22 00:52:01 1995  Theodore Y. Ts'o  (tytso@dcl)

	* telnetd.c (main): Don't use krb5_override_default_realm, as it
		is obsolete (non-existent).  Use krb5_set_default_realm
		instead. 

Fri Apr 21 12:47:57 1995  Mark Eichin  <eichin@cygnus.com>

	From Ian Taylor <ian@cygnus.com>.
	* telnetd.c (valid_opts): Add 'L'.  If KRB5, add -R and -t.
	(main): Handle -L.  If KRB5, handle -R and -t.
	* sys_term.c (login_program): New global variable.
	(start_login): Use login_program instead of LOGIN_PROGRAM.

Wed Mar 29 15:39:39 1995  Theodore Y. Ts'o  (tytso@dcl)

	* Makefile.in: Add dependency on libtelnet.a

Tue Mar  7 19:59:30 1995  Mark Eichin  <eichin@cygnus.com>

	* configure.in: take out ISODE_INCLUDE.

Thu Mar  2 12:30:32 1995  Theodore Y. Ts'o  <tytso@dcl>

	* Makefile.in (ISODELIB): Remove reference to $(ISODELIB).

Wed Mar  1 16:25:58 1995  Theodore Y. Ts'o  <tytso@dcl>

	* configure.in: Remove ISODE_INCLUDE and ISODE_DEFS, replace check
		for -lsocket and -lnsl with WITH_NETLIB check.

Tue Feb 28 01:50:22 1995  John Gilmore  (gnu at toad.com)

	* sys_term.c:  Avoid <krb5/...> includes.

Wed Jan 11 15:23:07 1995  Mark Eichin  <eichin@cygnus.com>

	* configure.in (K4LIB): fix quoting so $(KRB4) actually survives
	to the Makefile.

Fri Nov 18 01:23:13 1994  Mark Eichin  <eichin@cygnus.com>

	* Makefile.in (install): install telnetd manpage
	(from Ted Lemon <mellon@ipd.wellsfargo.com>).

Fri Nov 18 00:44:05 1994  Mark Eichin  <eichin@cygnus.com>

	* configure.in: use WITH_KRB4, cache cc_t in termio check, cache
	SETPGRP_TWOARG check.
	* Makefile.in (K4LIB): use @K4LIB@.
	(telnetd): use $(K4LIB). (from epeisach)

Mon Nov  7 22:16:51 1994  Theodore Y. Ts'o  (tytso@dcl)

	* configure.in: 
	  sys_term.c: Only include <sys/tty.h> if HAVE_SYS_TTY_H is
	  	  defined by configure.

        * configure.in: Check for sys/time.h and time.h.

	* defs.h: Pull in <sys/time.h> and <time.h> as necessary.

	* sys_term.c (startslave): Don't define time() manually.

	* configure.in: Add check for util library (needed for the Alpha)

Thu Sep 29 22:51:52 1994  Theodore Y. Ts'o  (tytso@dcl)

	* Makefile.in: Relink executables if libraries change

Tue Aug 16 18:04:58 1994  Mark Eichin  (eichin@tweedledumber.cygnus.com)

	* configure.in: check for vhangup.
	sys_term.c (cleanup): check for HAVE_VHANGUP.
	(cleanopen): ditto.

Mon Aug  8 01:15:27 1994  Mark Eichin  (eichin@cygnus.com)

	* utility.c (putf): don't misdeclare index/rindex, strings.h
	already got included. Don't even use them -- use str*chr instead.

Thu Aug  4 03:37:26 1994  Tom Yu  (tlyu@dragons-lair)

	* configure.in: pick up dbm libs

	* sys_term.h: fix linux lossage, i.e. <linux/tty.h>
	* configure.in: check for STREAMSPTY (hopefully)

	* Makefile.in:
	* configure.in: make install changes

Tue Jul 26 18:23:01 1994  Tom Yu  (tlyu@dragons-lair)

	* Makefile.in: fix missing $(srcdir)

Mon Jul 25 02:35:16 1994  Tom Yu  (tlyu@dragons-lair)

	* configure.in: check for utmpx

