AC_INIT(configure.in)
CONFIG_RULES
AC_PROG_ARCHIVE
AC_PROG_ARCHIVE_ADD
AC_PROG_RANLIB
AC_PROG_INSTALL
AC_HAVE_HEADERS(unistd.h)
AC_CHECK_FUNCS(srand48 srand srandom umask)

AC_CHECK_FUNCS(re_comp re_exec regcomp regexec)
dnl AIX is unusual in that it wants all symbols resolved at link time
dnl  Fortunately, it will allow us to link the kdb library now, even if
dnl it is linked again later.
case $krb5_cv_host in
*-*-aix*)
	LIBS="$LIBS -ldb"
	;;
esac
KRB5_RUN_FLAGS
V5_USE_SHARED_LIB
USE_KDB5_LIBRARY
KRB5_LIBRARIES
V5_SHARED_LIB_OBJS
V5_MAKE_SHARED_LIB(libkdb5,0.1,.., ./kdb)
AppendRule([all-unix:: ../libkdb5.a])
KRB5_SH_VERS=$krb5_cv_shlib_version_libkrb5
AC_SUBST(KRB5_SH_VERS)
CRYPTO_SH_VERS=$krb5_cv_shlib_version_libcrypto
AC_SUBST(CRYPTO_SH_VERS)
V5_AC_OUTPUT_MAKEFILE
