AC_INIT(auth_gssapi.c)
CONFIG_RULES
AC_PROG_ARCHIVE
AC_PROG_ARCHIVE_ADD
AC_PROG_RANLIB
AC_PROG_INSTALL
AC_TRY_COMPILE([
#include <netdb.h>
	],[
	struct rpcent e;
	char c = e.r_name[0];
	int i = e.r_number;
	], [rpcent_define='#define STRUCT_RPCENT_ALREADY_PROVIDED'],
	[rpcent_define='']) dnl
AC_SUBST(rpcent_define)
AC_CHECK_SIZEOF(int)
SIZEOF_INT=$ac_cv_sizeof_int
AC_SUBST(SIZEOF_INT)
AC_CHECK_SIZEOF(long)
SIZEOF_LONG=$ac_cv_sizeof_long
AC_SUBST(SIZEOF_LONG)

DECLARE_SYS_ERRLIST

V5_SHARED_LIB_OBJS
V5_MAKE_SHARED_LIB(libgssrpc,1.0,.., ./rpc)
GSSAPI_KRB5_SH_VERS=$krb5_cv_shlib_version_libgssapi_krb5
AC_SUBST(GSSAPI_KRB5_SH_VERS)
KRB5_SH_VERS=$krb5_cv_shlib_version_libkrb5
AC_SUBST(KRB5_SH_VERS)
CRYPTO_SH_VERS=$krb5_cv_shlib_version_libcrypto
AC_SUBST(CRYPTO_SH_VERS)
COMERR_SH_VERS=$krb5_cv_shlib_version_libcom_err
AC_SUBST(COMERR_SH_VERS)
CopySrcHeader(auth.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(auth_gssapi.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(auth_unix.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(clnt.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(netdb.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(pmap_clnt.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(pmap_prot.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(pmap_rmt.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(rpc.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(rpc_msg.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(svc.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(svc_auth.h,[$](BUILDTOP)/include/rpc)
CopyHeader(types.h,[$](BUILDTOP)/include/rpc)
CopySrcHeader(xdr.h,[$](BUILDTOP)/include/rpc)
V5_AC_OUTPUT_MAKEFILE( ,types.h:types.hin)
