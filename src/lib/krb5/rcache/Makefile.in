CFLAGS = $(CCOPTS) $(DEFS)

##DOSBUILDTOP = ..\..\..
##DOSMYNAME=rcache
##DOSOBJFILE=..\$(MYNAME).lst
##WIN16##LIBNAME=..\krb5.lib

.c.o:
	$(CC) $(CFLAGS) -c $(srcdir)/$*.c
@SHARED_RULE@

OBJS=	\
	rc_base.$(OBJEXT)	\
	rc_dfl.$(OBJEXT) 	\
	rc_io.$(OBJEXT)		\
	rcdef.$(OBJEXT)		\
	rc_conv.$(OBJEXT)	\
	ser_rc.$(OBJEXT)

SRCS=	\
	$(srcdir)/rc_base.c	\
	$(srcdir)/rc_dfl.c 	\
	$(srcdir)/rc_io.c	\
	$(srcdir)/rcdef.c	\
	$(srcdir)/rc_conv.c	\
	$(srcdir)/ser_rc.c

all-unix:: shared $(OBJS)
all-mac:: $(OBJS)
all-windows:: $(OBJFILE)

##DOS$(OBJFILE): $(OBJS)
##DOS	$(RM) $(OBJFILE)
##WIN16##	$(CP) nul: $(OBJFILE)
##WIN32##	$(LIBECHO) -p $(MYNAME)\ *.obj > $(OBJFILE)

shared:
	mkdir shared

clean-mac::
clean-windows::
	$(RM) $(OBJFILE)
clean-unix::
	$(RM) shared/*
