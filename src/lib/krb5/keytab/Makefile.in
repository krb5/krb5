CFLAGS = $(CCOPTS) $(DEFS)

##DOSBUILDTOP = ..\..\..
##DOSLIBNAME=..\krb5.lib
##DOS!include $(BUILDTOP)\config\windows.in

.c.o:
	$(CC) $(CFLAGS) -c $(srcdir)/$*.c
@SHARED_RULE@

OBJS=	\
	ktadd.$(OBJEXT)		\
	ktbase.$(OBJEXT)	\
	ktdefault.$(OBJEXT)	\
	ktfr_entry.$(OBJEXT)	\
	ktremove.$(OBJEXT)	\
	read_servi.$(OBJEXT)

SRCS=	\
	$(srcdir)/ktadd.c	\
	$(srcdir)/ktbase.c	\
	$(srcdir)/ktdefault.c	\
	$(srcdir)/ktfr_entry.c	\
	$(srcdir)/ktremove.c	\
	$(srcdir)/read_servi.c

shared:
	mkdir shared

all-unix:: shared $(OBJS)
all-mac:: $(OBJS)
all-windows:: $(OBJS)
	cd file
	@echo Making in keytab\file
	-$(MAKE) -$(MFLAGS) LIBCMD=$(LIBCMD)
	cd ..

clean-unix::
	$(RM) shared/*

clean-mac::
clean-windows::
	cd file
	@echo Making clean in keytab\file
	-$(MAKE) -$(MFLAGS) clean
	cd ..
	@echo Making clean locally

